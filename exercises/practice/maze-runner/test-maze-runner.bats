#!/usr/bin/env bats

@test "maze-runner.awk produces expected output" {
# Input maze
maze=$(cat << EOF
────┬─────────┬─────────┬───────┬───┐
⇨   │         │         │       │   │
┌─┐ └─┐ ┌─┐ │ └─┐ ──┬── │ ──┐ │ │ ──┘
│ │   │ │ │ │   │   │   │   │ │ │   ⇨
│ └─┐ │ │ │ ├─┐ └─┐ └─┐ │ ┌─┘ │ │ │ │
│   │ │   │ │ │   │   │ │ │   │ │ │ │
│ ──┘ ├───┘ │ └── │ │ └─┘ │ ┌─┘ │ │ │
│     │     │     │ │     │ │   │ │ │
│ ────┤ ────┴───┐ ├─┴───┐ │ │ ┌─┴─┤ │
│     │         │ │     │ │ │ │   │ │
├──── └──────── │ │ ┌── └─┘ │ │ │ │ │
│               │   │       │   │   │
└───────────────┴───┴───────┴───┴───┘
EOF
)

expected_output=$(cat << EOF
────┬─────────┬─────────┬───────┬───┐
⇨⋅⋅⋅│      ⋅⋅⋅│         │    ⋅⋅⋅│   │
┌─┐⋅└─┐ ┌─┐⋅│⋅└─┐ ──┬── │ ──┐⋅│⋅│ ──┘
│ │⋅⋅⋅│ │ │⋅│⋅⋅⋅│   │   │   │⋅│⋅│  ⋅⇨
│ └─┐⋅│ │ │⋅├─┐⋅└─┐ └─┐ │ ┌─┘⋅│⋅│ │⋅│
│   │⋅│   │⋅│ │⋅⋅⋅│   │ │ │⋅⋅⋅│⋅│ │⋅│
│ ──┘⋅├───┘⋅│ └──⋅│ │ └─┘ │⋅┌─┘⋅│ │⋅│
│⋅⋅⋅⋅⋅│⋅⋅⋅⋅⋅│    ⋅│ │     │⋅│⋅⋅⋅│ │⋅│
│⋅────┤⋅────┴───┐⋅├─┴───┐ │⋅│⋅┌─┴─┤⋅│
│⋅⋅⋅⋅⋅│⋅⋅⋅⋅⋅⋅⋅⋅⋅│⋅│⋅⋅⋅⋅⋅│ │⋅│⋅│⋅⋅⋅│⋅│
├────⋅└────────⋅│⋅│⋅┌──⋅└─┘⋅│⋅│⋅│⋅│⋅│
│    ⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅⋅│⋅⋅⋅│  ⋅⋅⋅⋅⋅│⋅⋅⋅│⋅⋅⋅│
└───────────────┴───┴───────┴───┴───┘
EOF
)

  # Run the script and compare the output to the expected output
  result="$(echo "$maze" | gawk -f maze-runner.awk)"
  [ "$result" == "$expected_output" ]
}
